<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>計算サポートツール</title>
<style>
  body { font-family: "Segoe UI", sans-serif; background: #f7f7f7; margin: 40px; }
  .container { background: white; padding: 20px 30px; border-radius: 10px; max-width: 600px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin: 0 auto; }
  h1 { text-align: center; color: #333; margin-top: 10px; }
  .logo { display: block; margin: 0 auto 10px auto; max-width: 200px; height: auto; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  select, input { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; }
  input:disabled { background: #e9e9e9; color: #666; }
  button { margin-top: 15px; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; }
  #calcBtn { background-color: #007bff; color: white; }
  #clearBtn { background-color: #999; color: white; margin-left: 10px; }
  .result { background: #eef; padding: 10px; border-radius: 5px; margin-top: 15px; font-size: 1.1em; }
</style>
</head>
<body>
<div class="container">

  <!-- 三協アルミ ロゴ -->
  <img src="三協アルミ_4C透過.png" alt="三協アルミロゴ" class="logo">

  <h1>計算サポートツール</h1>

  <label>使用電圧</label>
  <select id="voltage">
    <option value="12">DC12V</option>
    <option value="24">DC24V</option>
  </select>

  <label>ケーブル太さ（sq）</label>
  <select id="cable">
    <option value="1.25">1.25sq</option>
    <option value="2.0">2.0sq（※24Vのみ有効）</option>
  </select>

  <label>計算したい項目</label>
  <select id="calcType">
    <option value="drop">❶ 電圧降下（V）</option>
    <option value="distance">❷ 使用可能距離（m）</option>
    <option value="watt">❸ 使用可能W数（W）</option>
  </select>

  <label>距離 L（m）</label>
  <input type="number" id="distance" step="0.01">

  <label>使用W数 W（W）</label>
  <input type="number" id="watt" step="0.01">

  <button id="calcBtn">計算</button>
  <button id="clearBtn">クリア</button>

  <div id="result" class="result"></div>
</div>

<script>
const voltageSelect = document.getElementById("voltage");
const cableSelect = document.getElementById("cable");
const calcTypeSelect = document.getElementById("calcType");
const distanceInput = document.getElementById("distance");
const wattInput = document.getElementById("watt");
const resultDiv = document.getElementById("result");

// 入力欄の有効・無効を切り替える
function updateInputFields() {
  const type = calcTypeSelect.value;
  if (type === "drop") {
    distanceInput.disabled = false;
    wattInput.disabled = false;
  } else if (type === "distance") {
    distanceInput.disabled = true;
    wattInput.disabled = false;
  } else if (type === "watt") {
    distanceInput.disabled = false;
    wattInput.disabled = true;
  }
}
calcTypeSelect.addEventListener("change", updateInputFields);
updateInputFields(); // 初期化

// 計算ボタン
document.getElementById("calcBtn").addEventListener("click", () => {
  const voltage = parseFloat(voltageSelect.value);
  const cable = parseFloat(cableSelect.value);
  const calcType = calcTypeSelect.value;
  const distance = parseFloat(distanceInput.value);
  const watt = parseFloat(wattInput.value);

  // 電圧降下定数と許容値の設定
  let k = 0, limit = 0;
  if (voltage === 12) {
    k = 0.00252; limit = 1;
  } else if (voltage === 24) {
    if (cable === 1.25) k = 0.00126;
    else if (cable === 2.0) k = 0.00081;
    limit = 2;
  }

  let resultText = "";

  if (calcType === "drop") {
    if (isNaN(distance) || isNaN(watt)) return alert("距離と使用W数を入力してください。");
    const drop = distance * watt * k;
    resultText = `電圧降下：${drop.toFixed(3)} V`;
    if (drop > limit) resultText += `（⚠許容値${limit}Vを超えています）`;
  }
  else if (calcType === "distance") {
    if (isNaN(watt)) return alert("使用W数を入力してください。");
    const maxDist = limit / (watt * k);
    resultText = `使用可能距離：${maxDist.toFixed(2)} m`;
  }
  else if (calcType === "watt") {
    if (isNaN(distance)) return alert("距離を入力してください。");
    const maxW = limit / (distance * k);
    resultText = `使用可能W数：${maxW.toFixed(2)} W`;
  }

  resultDiv.textContent = resultText;
});

// クリアボタン
document.getElementById("clearBtn").addEventListener("click", () => {
  distanceInput.value = "";
  wattInput.value = "";
  resultDiv.textContent = "";
});
</script>
</body>
</html>
